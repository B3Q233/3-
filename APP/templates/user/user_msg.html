<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>用户信息</title>
    <link rel="stylesheet" href="../static/css/login.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  <!-- 引入jQuery库，方便使用Ajax -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui-src/dist/css/layui.css" media="all">
    <script src="https://cdn.jsdelivr.net/npm/layui-src/dist/layui.all.js"></script>
    <style>
        /* 整体页面背景色设置为浅灰色，营造柔和的视觉效果 */
        body {
            background-color: #f2f2f2;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        /* 用户信息容器样式，设置宽度、背景色、边框、内边距、外边距、圆角等，使其更具立体感和美观性，且在页面中居中显示 */
        #user-info-container {
            width: 60%;
            background-color: white;
            border: 1px solid #ccc;
            padding: 20px;
            margin: 50px auto;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* 信息列表样式，去除默认的列表样式，使其更简洁 */
        #user-info-container ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        /* 信息列表项样式，设置内边距、边框底部、字体大小等，增强可读性和视觉层次感 */
        #user-info-container ul li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            font-size: 16px;
        }

        /* 最后一个列表项去除底部边框，避免多余的线条影响美观 */
        #user-info-container ul li:last-child {
            border-bottom: none;
        }

        /* 信息项的标题（如用户名、邮箱等）加粗显示，方便区分内容和标题 */
        #user-info-container ul li strong {
            font-weight: bold;
            margin-right: 5px;
        }
    </style>
</head>

<body>
    <div id="user-info-container"></div> <!-- 用于展示用户信息的容器 -->
    <script>
        function showError(msg) {
            layui.use('layer', function () {
                let layer = layui.layer;
                layer.msg(msg); // 默认风格
            });
        }

        window.onload = function () {
            var loggedInUsername = localStorage.getItem("loggedInUsername");
            if (loggedInUsername) {
                // 使用AJAX发送GET请求到后端获取用户信息
                $.ajax({
                    type: "POST",
                    contentType: 'application/json',
                    url: "/get_user_info",  // 后端获取用户信息的接口地址，需根据实际情况修改
                    data: {
                        username: loggedInUsername
                    },
                    dataType: 'json',
                    success: function (response) {
                        if (response.status === 1) {
                            var userInfoContainer = document.getElementById('user-info-container');
                            var infoHtml = '<ul>';
                            infoHtml += '<li><strong>用户名:</strong> ' + response.username + '</li>';
                            infoHtml += '<li><strong>邮箱:</strong> ' + response.email + '</li>';
                            infoHtml += '<li><strong>API Key:</strong> ' + response.api_key + '</li>';
                            infoHtml += '<li><strong>密码:</strong> ' + response.password + '</li>';
                            infoHtml += '<li><strong>配额:</strong> ' + response.quota + '</li>';
                            infoHtml += '</ul>';
                            userInfoContainer.innerHTML = infoHtml;  // 将用户信息展示在页面上
                        } else {
                            showError(response.msg)
                        }
                    },
                    error: function (xhr, status, error) {
                        showError("请求发生错误，请稍后再试");
                    }
                });
            }
        };
    </script>
</body>

</html>